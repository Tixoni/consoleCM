**main.py --vfs-path vfs_deep.xml** - для запуска теста через консоль. 3 этапа 
**python main.py --vfs-path vfs_test.xml** --startup-script startup_script.txt - для запуска теста через консоль. 4 этапа 

### **main.py** - отвечает за внешний вид консоли, обработку всех команд передает в handlers.py 

- **`parse_arguments`** — отвечает за парсинг аргументов командной строки (`--vfs-path`, `--startup-script`) и проверку существования указанных файлов.  
- **`ShellEmulator.__init__`** — инициализирует графический интерфейс эмулятора, загружает VFS и выполняет стартовый скрипт при наличии.  
- **`_debug_output`** — выводит подробную отладочную информацию о переданных аргументах запуска.  
- **`setup_gui`** — настраивает внешний вид терминала (цвета, шрифт, промпт) и привязывает обработчики клавиш; теперь формирует промпт с **текущей директорией** из VFS.  
- **`display_output`** — универсальный метод для вывода текста в окно терминала с прокруткой вниз.  
- **`execute_startup_script`** — читает и построчно выполняет команды из стартового скрипта, отображая их в интерфейсе с динамическим промптом, включающим текущий путь.  
- **`on_key`** — обрабатывает нажатие печатаемых символов, предотвращая редактирование истории.  
- **`on_backspace`** — обрабатывает клавишу Backspace, запрещая удаление текста до текущего промпта.  
- **`on_delete`** — обрабатывает клавишу Delete, ограничивая удаление только вводимой пользователем частью.  
- **`on_enter`** — обрабатывает нажатие Enter: извлекает команду, выполняет её через `CommandHandler`, выводит результат и **обновляет промпт с актуальной текущей директорией** (например, после `cd`).  
- **`run`** — запускает основной цикл событий графического интерфейса Tkinter.

---

### **handlers.py** - отвечает за логику работы команд из linux

- **`CommandHandler.__init__`** — инициализирует обработчик команд, загружает VFS из XML-файла и регистрирует доступные команды, включая новые: `pwd` и `cat`.  
- **`execute_script`** — выполняет команды из внешнего скрипта, обрабатывает ошибки и возвращает список выполненных команд и ошибок.  
- **`expand_environment_variables`** — подставляет значения переменных окружения (например, `$HOME`) в команду, если они указаны.  
- **`execute`** — основной метод обработки команды: расширяет переменные, разбивает на части и делегирует выполнение соответствующему обработчику.  
- **`_handle_exit`** — отвечает за логику завершения работы эмулятора (возвращает специальный сигнал `"EXIT_TERMINAL"`).  
- **`_handle_ls`** — отвечает за логику работы команды вывода списка файлов и директорий в текущей папке VFS.  
- **`_handle_cd`** — отвечает за логику смены текущей директории в VFS, поддерживает абсолютные и относительные пути, включая `..` и `/`.  
- **`_handle_help`** — отвечает за вывод справки по доступным командам эмулятора (включая `pwd` и `cat`).  
- **`_handle_vfs_info`** — отвечает за логику работы функции вывода информации о виртуальной файловой системе (имя и SHA-256 хеш XML-файла).  
- **`_handle_pwd`** —  возвращает абсолютный путь текущей директории в VFS (например, `/home/user`).  
- **`_handle_cat`** —  читает и выводит содержимое указанного файла из VFS, поддерживая относительные и абсолютные пути; обрабатывает ошибки (файл не найден, путь — не файл и т.д.).
- **`_handle_tac`** — **новый метод**: выводит содержимое указанного файла в обратном порядке строк (последняя строка становится первой); поддерживает относительные и абсолютные пути; обрабатывает ошибки аналогично команде `cat`.
- **`_handle_rev`** — **новый метод**: переворачивает каждую строку указанного файла задом наперёд (символы в каждой строке идут в обратном порядке); поддерживает относительные и абсолютные пути; обрабатывает ошибки аналогично команде `cat`.
---

### **vfs.py** - отвечает за логику работы команд связанных с vfs

- **`VFSManager.__init__`** — инициализирует виртуальную файловую систему, загружая данные из XML-файла и вычисляя его хеш.  
- **`_load_vfs`** — загружает содержимое XML-файла, проверяет его структуру и инициализирует внутреннее дерево VFS.  
- **`_parse_node`** — рекурсивно преобразует XML-элементы (`<dir>`, `<file>`) в иерархическую структуру данных в памяти.  
- **`get_vfs_info`** — возвращает строку с именем VFS и SHA-256 хешем исходного XML-файла для команды `vfs-info`.  
- **`_get_node_at_path`** — вспомогательный метод для получения узла (файла или директории) по заданному пути внутри VFS.  
- **`cd`** — реализует логику смены текущей директории в VFS с поддержкой навигации (`.` и `..`) и защитой от выхода за пределы.  
- **`ls`** — возвращает отформатированный список имён файлов и поддиректорий в текущей директории VFS.  
- **`get_current_path_str`** — **новый метод**: возвращает текущий путь в виде абсолютной строки (например, `/` или `/home/docs`), используемой для формирования промпта и команды `pwd`.  
- **`read_file`** — **новый метод**: получает содержимое файла по относительному или абсолютному пути, поддерживает обработку base64-кодированных данных и валидацию типа узла (только файлы).
